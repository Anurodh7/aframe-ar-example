<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Hello, AR World! • A-Frame</title>
    <meta name="description" content="Hello, AR World! • A-Frame">
    <script src="https://aframe.io/releases/1.7.1/aframe.min.js"></script>

    <script>
      AFRAME.registerComponent('follow-shadow', {
        schema: {type: 'selector'},
        init() { this.el.object3D.renderOrder = -1; },
        tick() {
          if (this.data) {
            this.el.object3D.position.copy(this.data.object3D.position);
            this.el.object3D.position.y -= 0.001;
          }
        }
      });
    </script>
  </head>

  <body>
    <a-scene
      reflection="directionalLight: a-light[type=directional]"
      ar-hit-test="target: #snowman;"
      renderer="colorManagement: true; exposure: 1; toneMapping: ACESFilmic"
      shadow="type: pcfsoft"
      xr-mode-ui="XRMode: xr"
    >

      <a-light
        type="directional"
        light="castShadow:true;"
        position="1 1 1"
        intensity="1.5"
        shadow-camera-automatic="#snowman">
      </a-light>

      <a-camera position="0 0.4 0"></a-camera>

      <a-entity id="snowman" visible="false">
        <a-sphere radius="0.25" position="0 0.25 0" color="#ffffff"></a-sphere>
        <a-sphere radius="0.18" position="0 0.55 0" color="#ffffff"></a-sphere>
        <a-sphere radius="0.12" position="0 0.8 0" color="#ffffff"></a-sphere>
        <a-cone radius-bottom="0.03" height="0.1" position="0 0.8 0.12" rotation="-90 0 0" color="#ff7f00"></a-cone>
      </a-entity>

      <a-plane
        follow-shadow="#snowman"
        material="shader:shadow"
        shadow="cast:false;"
        rotation="-90 0 0"
        width="2"
        height="2">
      </a-plane>

      <a-sky color="#88ccee" hide-on-enter-ar></a-sky>

    </a-scene>
  </body>
</html>

